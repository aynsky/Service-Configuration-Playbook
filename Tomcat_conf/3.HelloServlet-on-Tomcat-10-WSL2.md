# HelloServlet on Tomcat 10 (WSL2) â€“ Step-by-Step ğŸ¯

This guide shows how to create a **simple Java servlet** on Tomcat 10 in WSL2, highlighting challenges and solutions.

---

## ğŸ“‹ Table of Contents
- [Create the Web App Structure](#1ï¸âƒ£-create-the-web-app-structure)
- [Write the Servlet](#2ï¸âƒ£-write-the-servlet)
- [Compile the Servlet](#3ï¸âƒ£-compile-the-servlet)
- [Configure web.xml](#4ï¸âƒ£-configure-webxml)
- [Deploy and Test](#5ï¸âƒ£-deploy-and-test)
- [Common Challenges](#6ï¸âƒ£-challenges-we-faced)
- [Key Learnings](#âœ…-key-learnings)

---

## ğŸš¨ Important Note

> Always check `$CATALINA_HOME/lib` for the **correct servlet-api jar** before compiling servlets. In Tomcat 10+, use `jakarta.servlet.*` instead of `javax.servlet.*`.

---

## 1ï¸âƒ£ Create the Web App Structure

```bash
mkdir -p $CATALINA_HOME/webapps/HelloWorld/WEB-INF/classes
mkdir -p $CATALINA_HOME/webapps/HelloWorld/WEB-INF/lib
```

**Directory structure:**
- `classes/` â†’ compiled `.class` files
- `lib/` â†’ extra jars
- `WEB-INF/web.xml` â†’ servlet mapping

---

## 2ï¸âƒ£ Write the Servlet

Create `HelloServlet.java`:

```java
import java.io.*;
import jakarta.servlet.*;
import jakarta.servlet.http.*;

public class HelloServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<h1>Hello from Tomcat 10 Servlet!</h1>");
    }
}
```

> âš ï¸ **Challenge:** In Tomcat 10+, `javax.servlet.*` no longer works â†’ must use `jakarta.servlet.*`.

---

## 3ï¸âƒ£ Compile the Servlet

```bash
cd $CATALINA_HOME/webapps/HelloWorld/WEB-INF/classes
javac -cp "$CATALINA_HOME/lib/servlet-api.jar" HelloServlet.java
```

- âœ… Check that `HelloServlet.class` is generated
- ğŸ’¡ **Tip:** If compilation fails, confirm the correct jar name in `$CATALINA_HOME/lib/`

---

## 4ï¸âƒ£ Configure `web.xml`

Create `$CATALINA_HOME/webapps/HelloWorld/WEB-INF/web.xml`:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee
         https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd"
         version="5.0">
         
    <servlet>
        <servlet-name>HelloServlet</servlet-name>
        <servlet-class>HelloServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>HelloServlet</servlet-name>
        <url-pattern>/hello</url-pattern>
    </servlet-mapping>
</web-app>
```

- Maps `/hello` URL to `HelloServlet`

---

## 5ï¸âƒ£ Deploy and Test

```bash
# Restart Tomcat
$CATALINA_HOME/bin/shutdown.sh
$CATALINA_HOME/bin/startup.sh
```

**Test the servlet:**
- Visit: `http://localhost:8080/HelloWorld/hello`
- You should see: `Hello from Tomcat 10 Servlet!`

---

## 6ï¸âƒ£ Challenges We Faced

### 1. Cannot find `javax.servlet`
**Problem:** Old tutorials use deprecated namespace  
**Fix:** Switch to `jakarta.servlet` imports

### 2. History expansion in Bash
**Problem:** Shell interprets `!` as history expansion  
**Fix:** Use single quotes or escape `!`

### 3. Compiling with correct classpath
**Problem:** Missing servlet API during compilation  
**Fix:** Include `$CATALINA_HOME/lib/servlet-api.jar`

---

## âœ… Key Learnings

- **Servlets** = Java classes that handle HTTP requests
- **`web.xml`** = deployment descriptor that maps URLs to servlets
- **Folder structure matters** (`WEB-INF/classes`, `WEB-INF/lib`)
- **Tomcat 10 requires Jakarta namespaces**, not Javax
- **On WSL2**, always use `startup.sh` and `shutdown.sh` instead of systemctl

---

## ğŸ” Troubleshooting

### Common Issues and Solutions

| Issue | Symptom | Solution |
|-------|---------|----------|
| ClassNotFoundException | Servlet not found | Check class is in `WEB-INF/classes` |
| 404 Error | Page not found | Verify URL pattern in `web.xml` |
| Compilation Error | Cannot find symbol | Ensure correct classpath with servlet-api.jar |

---

## ğŸ“ Final Directory Structure

```
$CATALINA_HOME/webapps/HelloWorld/
â”œâ”€â”€ WEB-INF/
â”‚   â”œâ”€â”€ classes/
â”‚   â”‚   â”œâ”€â”€ HelloServlet.java
â”‚   â”‚   â””â”€â”€ HelloServlet.class
â”‚   â”œâ”€â”€ lib/
â”‚   â””â”€â”€ web.xml
â””â”€â”€ (other static files)
```

---

## ğŸ”— Next Steps

- Try creating more complex servlets with parameters
- Learn about servlet filters and listeners  
- Explore JSP (JavaServer Pages) integration
- Set up a proper development environment with Maven/Gradle

---

## ğŸ“š Additional Resources

- [Jakarta Servlet Specification](https://jakarta.ee/specifications/servlet/)
- [Tomcat 10 Documentation](https://tomcat.apache.org/tomcat-10.1-doc/)
- [Migration Guide: javax to jakarta](https://jakarta.ee/specifications/servlet/5.0/jakarta-servlet-spec-5.0.html)